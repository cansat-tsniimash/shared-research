Древний код для работы с СД картами на SPI с использованием DMA на stm32f1.
Это было так давно, что cubeide и даже stm32_hal тогда еще не использовались. Вместо них использовалась stm32-stdperiph библиотека, которая во многом похожа на хал, но во многом и отличается.

Возможно код будет полезен для кого-то как вдохновение